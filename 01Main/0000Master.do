*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??
*?? default setups
*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??

clear all
set more off

set maxvar 32767
set varabbrev off

*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??
*?? global macros to store folder paths
*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??

if	"`c(username)'" == "wang" {
    global user "E:/__RA/02MANAGERS"
}

if	"`c(username)'" == "wenzhi0" {
    global user "/home/wenzhi0/JMP"
    ssc install grstyle, replace
    ssc install palettes, replace

    ssc install colrspace, replace
    ssc install schemepack, replace
    ssc install ftools, replace
    ssc install reghdfe, replace
    ssc install xlincom, replace
    ssc install coefplot, replace
    ssc install estout, replace
    ssc install ppmlhdfe, replace
}

if  "`c(username)'" =="virginiaminni" {
    global user "/Users/virginiaminni/Library/CloudStorage/Dropbox/Managers"
}

if 	"`c(username)'" == "virginia_m"   {		
    global user = "C:\Users\virginia_m\Dropbox\Managers"
}


cd "${user}"

* Paper Managers folder
global Paper        "${user}/Paper Managers"
global DoFiles      "${user}/Paper Managers/DoFiles"
global Results      "${user}/Paper Managers/Results"

global FinalData    "${user}/Paper Managers/Data"
global RawMNEData   "${user}/Paper Managers/Data/01RawData/01MNEData"
global RawONETData  "${user}/Paper Managers/Data/01RawData/02ONET"
global RawCntyData  "${user}/Paper Managers/Data/01RawData/03Country"
global TempData     "${user}/Paper Managers/Data/02TempData"

*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??
*?? libraries (user-written procedures) to be used 
*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??
/* This script contains code that allows scripts to be run individually on a standalone basis, if the user has defined the project global in their Stata profile. */

/* * Ensure the script uses only local libraries and programs
tokenize `"$S_ADO"', parse(";")
while `"`1'"' != "" {
    if `"`1'"'!="BASE" cap adopath - `"`1'"'
    macro shift
}
adopath ++ "$analysis/DoFiles/Libraries"

* Additional code you want automatically executed
assert !mi("$user") */

*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??
*?? set figure scheme 
*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??
set scheme white_tableau
grstyle init
grstyle set plain, horizontal grid

*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??
*?? Stata version control
*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??
version 17.0

*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??
*?? main programs 
*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??

*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?
*-? dataset construction
*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?

/* capture log close 
log using "${Results}/001DataCleaning/logfile_20250113_DataConstruction", replace text

do "${DoFiles}/01Main/0101GenerateWorkerOutcomes.do"
do "${DoFiles}/01Main/0102HFMeasure.do"
do "${DoFiles}/01Main/0103GenerateEventDummies.do"
do "${DoFiles}/01Main/0104GenerateHeterogeneityIndicators.do"
do "${DoFiles}/01Main/0105SalesProductivityDatasets.do"
do "${DoFiles}/01Main/0106TeamLevelDataset.do"

//&? It takes around 15 min to create all the main datasets used in the paper.
log close */

*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?
*-? event studies 
*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?

/* *!! quarterly aggregation programs
do "${DoFiles}/01Main/0201CoefPrograms_LHminusLL.do" 
do "${DoFiles}/01Main/0202CoefPrograms_HLminusHH.do"
do "${DoFiles}/01Main/0203CoefPrograms_Dual_TestingforAsymmetries.do"
do "${DoFiles}/01Main/0204CoefPrograms_LHminusLL_OnlyPost.do" 
do "${DoFiles}/01Main/0205CoefPrograms_HLminusHH_OnlyPost.do"
do "${DoFiles}/01Main/0206CoefPrograms_Dual_TestingforAsymmetries_OnlyPost.do"
do "${DoFiles}/01Main/0207CoefPrograms_CohortDynamics.do" */


*!! event study regressions 
/* do "${DoFiles}/01Main/0301_01TwoMainOutcomesInEventStudies.do"
do "${DoFiles}/01Main/0301_02PayOutcomesInEventStudies.do"
do "${DoFiles}/01Main/0301_03WLPromotionsInEventStudies.do"
do "${DoFiles}/01Main/0301_04ONETInEventStudies_EarlyAgeM.do"
do "${DoFiles}/01Main/0301_05ProbLateralTransferInEventStudies_EarlyAgeM.do"
do "${DoFiles}/01Main/0302_01Decomp_TransferSJC.do"
do "${DoFiles}/01Main/0302_02Decomp_PromWL.do" */

*!! exit results 
/* do "${DoFiles}/01Main/0304_01ExitOutcomes_CrossSection.do" */
/* do "${DoFiles}/01Main/0304_02ExitOutcomes_DiffTypes.do" */

*!! heterogeneity table 
/* do "${DoFiles}/01Main/0303HeterogeneityOnMainOutcomes.do" */

*!! exploration of more heterogeneity results 
/* do "${DoFiles}/03Exploration/02Heterogeneity/030208_01HeteroByFirstMngrDuration_Gains.do" */
/* do "${DoFiles}/03Exploration/02Heterogeneity/030208_02HeteroByFirstMngrDuration_Loss.do" */

