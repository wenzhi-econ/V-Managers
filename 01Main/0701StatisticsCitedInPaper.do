/* 
This do file produces all statistics that are cited in the paper.

*/

*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??
*?? step 1. numbers 
*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??

use "${TempData}/04MainOutcomesInEventStudies_EarlyAgeM.dta", clear 

keep if FT_Mngr_both_WL2==1 & FT_Rel_Time!=.
    //&? a panel of event workers 

sort IDlse YearMonth 
bysort IDlse: generate occurrence = _n 

count if occurrence==1 
    //&? number of workers: 29,288
count if occurrence==1 & FT_LtoL==1
    //&? number of LtoL events: 20,622
count if occurrence==1 & FT_LtoH==1
    //&? number of LtoH events: 4,104
count if occurrence==1 & FT_HtoH==1
    //&? number of HtoH events: 1,745
count if occurrence==1 & FT_HtoL==1
    //&? number of HtoL events: 2,817

codebook IDlseMHR if inrange(FT_Rel_Time, -1, 0) & FT_Mngr_both_WL2==1
    //&? number of managers: 14,609


tabulate WL if FT_Rel_Time==0
/* 
Work-Level: |
1 lowest, 6 |
    highest |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |     28,197       96.27       96.27
          2 |      1,091        3.73      100.00
------------+-----------------------------------
      Total |     29,288      100.00
*/

*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??
*?? step 2. event workers and manager / full sample 
*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??*??

use "${TempData}/04MainOutcomesInEventStudies_EarlyAgeM.dta", clear 
merge m:1 IDlseMHR YearMonth using "${TempData}/temp_Mngr_WL.dta", keep(master match) nogenerate keepusing(WLM)
    // <== using dataset created in 0103 do file 

*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?
*-? s-2-1. share of managers in the event study among all potential managers
*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?

codebook IDlseMHR if WLM==2
    //&? number of managers whose work level has been 2 any point in the dataset: 25,872

display 14609 / 25872

*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?
*-? s-2-2. share of workers in the event study 
*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?*-?

keep if WL==1 
keep if WLM==2
codebook IDlse
    //&? number of workers whose work level has been 1 any point in the dataset and has a WL2 manager: 132,873

display 29288 / 132873